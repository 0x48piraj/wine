TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = none

SUBDIRS = \
	port \
	wine \
	wpp

INSTALLSUBDIRS = \
	wine

SYMLINKS = \
	libwine.$(LIBEXT)

@MAKE_RULES@

ALL_SYMLINKS =  $(SYMLINKS) $(SYMLINKS:.so=.so.1) $(SYMLINKS:.dylib=.1.dylib) $(SYMLINKS:.dll=.a)

all: $(SUBDIRS) $(ALL_SYMLINKS)

install-lib:: $(INSTALLSUBDIRS:%=%/__install-lib__)
install-dev:: $(INSTALLSUBDIRS:%=%/__install-dev__)

clean::
	$(RM) $(ALL_SYMLINKS)

# Symlinks

libwine.so libwine.so.1 libwine.dll libwine.dylib libwine.1.dylib libwine.a: wine/libwine.$(LIBEXT)
	$(RM) $@ && $(LN_S) wine/$@ $@

# Directory dependencies

wine/libwine.$(LIBEXT): wine
wine wine/__install__ wine/__install-lib__: port

### Dependencies:
