TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = wine
IMPORTS   = ntdll
LDIMPORTS = ntdll.dll

C_SRCS = \
	main.c

all: $(MODULE)

@MAKE_RULES@

ALL_OBJS = $(MODULE).spec.o $(OBJS)
LDEXECFLAGS = @LDEXECFLAGS@

$(MODULE): $(ALL_OBJS)
	$(CC) -o $@ $(LDEXECFLAGS) $(ALL_OBJS) -L$(DLLDIR) $(LDIMPORTS:%=-l%) $(LIBWINE) $(LIBUNICODE) $(LIBPORT) $(LIBS) $(LDFLAGS)

$(MODULE).spec.c: $(WINEBUILD)
	$(WINEBUILD) $(DEFS) -o $@ --exe $(MODULE) --exe-mode gui --entry wine_initial_task -L$(DLLDIR) $(IMPORTS:%=-l%)

install:: $(MODULE)
	$(MKINSTALLDIRS) $(bindir)
	$(INSTALL_PROGRAM) wine $(bindir)/wine

uninstall::
	$(RM) $(bindir)/wine

clean::
	$(RM) $(MODULE)

### Dependencies:
