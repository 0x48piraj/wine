TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = wine
IMPORTS   = ntdll
LDIMPORTS = ntdll.dll

SPEC_SRCS = wine.spec

C_SRCS = \
	main.c

all: $(MODULE)

@MAKE_RULES@

ALL_OBJS = $(SPEC_SRCS:.spec=.spec.o) $(OBJS)

$(MODULE): $(ALL_OBJS)
	$(CC) -o $@ $(ALL_OBJS) -L$(DLLDIR) $(LDIMPORTS:%=-l%) $(LIBWINE) $(LIBUNICODE) $(LIBPORT) $(LIBS) $(LDFLAGS)

wine.spec.c: $(WINEBUILD)
	$(LDPATH) $(WINEBUILD) $(DEFS) -o $@ --exe wine --exe-mode gui --entry wine_initial_task -L$(DLLDIR) $(IMPORTS:%=-l%)

install:: $(MODULE)
	$(MKINSTALLDIRS) $(bindir)
	$(INSTALL_PROGRAM) wine $(bindir)/wine

uninstall::
	$(RM) $(bindir)/wine

clean::
	$(RM) $(MODULE)

### Dependencies:
