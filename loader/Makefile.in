TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = wine

C_SRCS = \
	kthread.c \
	main.c \
	pthread.c

KTHREAD_OBJS = main.o kthread.o
PTHREAD_OBJS = main.o pthread.o

BINARIES = \
	wine-kthread \
	wine-pthread

all: $(BINARIES) $(MODULE)

@MAKE_RULES@

LIBPTHREAD  = @LIBPTHREAD@
MAIN_BINARY = @MAIN_BINARY@
LDEXECFLAGS = @LDEXECFLAGS@

wine-kthread: $(KTHREAD_OBJS) Makefile.in
	$(CC) -o $@ $(LDEXECFLAGS) $(KTHREAD_OBJS) $(LIBWINE) $(LIBPORT) $(EXTRALIBS) $(LDFLAGS)

wine-pthread: $(PTHREAD_OBJS) Makefile.in
	$(CC) -o $@ $(LDEXECFLAGS) $(PTHREAD_OBJS) $(LIBWINE) $(LIBPORT) $(LIBPTHREAD) $(EXTRALIBS) $(LDFLAGS)

$(MODULE): $(MAIN_BINARY)
	$(RM) $(MODULE) && $(LN_S) $(MAIN_BINARY) $(MODULE)

install:: $(BINARIES)
	$(MKINSTALLDIRS) $(bindir)
	$(INSTALL_PROGRAM) wine-kthread $(bindir)/wine-kthread
	$(INSTALL_PROGRAM) wine-pthread $(bindir)/wine-pthread
	cd $(bindir) && $(RM) $(MODULE) && $(LN_S) $(MAIN_BINARY) $(MODULE)

uninstall::
	$(RM) $(BINARIES:%=$(bindir)/%) $(bindir)/$(MODULE)

clean::
	$(RM) $(BINARIES) $(MODULE)

### Dependencies:
