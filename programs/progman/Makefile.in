DEFS      = -DWINELIB
TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = none
PROGRAMS  = progman
IMPORTS   = shell32 comdlg32 ole32 winspool.drv
WRCEXTRA  = -s -p progman

LICENSELANG = En

C_SRCS = \
	dialog.c \
	group.c \
	grpfile.c \
	license.c \
	main.c \
	program.c \
	string.c \
	$(LICENSELANG:%=License_%.c)

SPEC_SRCS = progman.spec

RC_SRCS = rsrc.rc

all: check_wrc $(PROGRAMS)

@MAKE_RULES@

# Override resource compiler rules
.rc.s:
	$(CPP) $(DEFS) $(OPTIONS) $(DIVINCL) -DRC_INVOKED -P -x c $< | $(WRC) $(WRCFLAGS) $(WRCEXTRA) -o $*.s

progman: $(OBJS)
	$(CC) -o progman $(OBJS) $(DLL_LINK) $(LIBS)

install::
	$(INSTALL_PROGRAM) progman $(bindir)/progman

uninstall::
	$(RM) $(bindir)/progman

### Dependencies:
