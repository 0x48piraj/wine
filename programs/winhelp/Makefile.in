DEFS      = -DWINELIB
TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = none
PROGRAMS  = winhelp hlp2sgml
ALL_LIBS  = $(WINELIB) $(X_LIBS) $(XLIB) $(LIBS)
WRCEXTRA  = -t -A -p winhelp

C_SRCS = \
	winhelp.c \
	hlpfile.c \
	macro.c \
	string.c

EXTRA_SRCS = macro.yacc.y macro.lex.l
EXTRA_OBJS = y.tab.o lex.yy.o

RC_SRCS = rsrc.rc

all: check_wrc $(PROGRAMS)

depend:: y.tab.h

@MAKE_RULES@

# Override resource compiler rules
.rc.s:
	$(CPP) $(DEFS) $(OPTIONS) $(DIVINCL) -DRC_INVOKED -P -x c $< | $(WRC) $(WRCFLAGS) $(WRCEXTRA) -o $*.s

winhelp: $(OBJS) $(WINESTUB)
	$(CC) -o winhelp $(OBJS) $(LDOPTIONS) $(ALL_LIBS)

hlp2sgml: hlp2sgml.o hlpfile.o
	$(CC) -o hlp2sgml hlp2sgml.o hlpfile.o

install::
	$(INSTALL_PROGRAM) winhelp $(bindir)/winhelp
	$(INSTALL_PROGRAM) hlp2sgml $(bindir)/hlp2sgml

uninstall::
	$(RM) $(bindir)/winhelp $(bindir)/hlp2sgml

y.tab.c y.tab.h: macro.yacc.y
	$(YACC) -d -t $(SRCDIR)/macro.yacc.y

lex.yy.c: macro.lex.l
	$(LEX) -8 -i $(SRCDIR)/macro.lex.l

### Dependencies:
