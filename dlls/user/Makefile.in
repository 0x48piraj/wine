EXTRADEFS = -D_USER32_ -D_WINABLE_ -DWINE_NO_STRICT
TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = user32.dll
IMPORTS   = gdi32 advapi32 kernel32
ALTNAMES  = user.exe keyboard.dll ddeml.dll display.dll mouse.dll
EXTRALIBS = $(LIBUNICODE)

LDDLLFLAGS = @LDDLLFLAGS@
SYMBOLFILE = $(MODULE).tmp.o

C_SRCS = \
	$(TOPOBJDIR)/controls/button.c \
	$(TOPOBJDIR)/controls/combo.c \
	$(TOPOBJDIR)/controls/desktop.c \
	$(TOPOBJDIR)/controls/edit.c \
	$(TOPOBJDIR)/controls/icontitle.c \
	$(TOPOBJDIR)/controls/listbox.c \
	$(TOPOBJDIR)/controls/menu.c \
	$(TOPOBJDIR)/controls/scroll.c \
	$(TOPOBJDIR)/controls/static.c \
	$(TOPOBJDIR)/controls/uitools.c \
	$(TOPOBJDIR)/windows/class.c \
	$(TOPOBJDIR)/windows/clipboard.c \
	$(TOPOBJDIR)/windows/cursoricon.c \
	$(TOPOBJDIR)/windows/dce.c \
	$(TOPOBJDIR)/windows/defdlg.c \
	$(TOPOBJDIR)/windows/defwnd.c \
	$(TOPOBJDIR)/windows/dialog.c \
	$(TOPOBJDIR)/windows/driver.c \
	$(TOPOBJDIR)/windows/hook.c \
	$(TOPOBJDIR)/windows/input.c \
	$(TOPOBJDIR)/windows/keyboard.c \
	$(TOPOBJDIR)/windows/mdi.c \
	$(TOPOBJDIR)/windows/message.c \
	$(TOPOBJDIR)/windows/msgbox.c \
	$(TOPOBJDIR)/windows/multimon.c \
	$(TOPOBJDIR)/windows/nonclient.c \
	$(TOPOBJDIR)/windows/painting.c \
	$(TOPOBJDIR)/windows/queue.c \
	$(TOPOBJDIR)/windows/rect.c \
	$(TOPOBJDIR)/windows/scroll.c \
	$(TOPOBJDIR)/windows/spy.c \
	$(TOPOBJDIR)/windows/struct32.c \
	$(TOPOBJDIR)/windows/syscolor.c \
	$(TOPOBJDIR)/windows/sysmetrics.c \
	$(TOPOBJDIR)/windows/sysparams.c \
	$(TOPOBJDIR)/windows/timer.c \
	$(TOPOBJDIR)/windows/user.c \
	$(TOPOBJDIR)/windows/win.c \
	$(TOPOBJDIR)/windows/winhelp.c \
	$(TOPOBJDIR)/windows/winpos.c \
	$(TOPOBJDIR)/windows/winproc.c \
	cache.c \
	caret.c \
	comm16.c \
	dde/client.c \
	dde/ddeml16.c \
	dde/misc.c \
	dde/server.c \
	display.c \
	exticon.c \
	focus.c \
	lstr.c \
	message.c \
	misc.c \
	mouse.c \
	msg16.c \
	painting.c \
	property.c \
	resource.c \
	text.c \
	user_main.c \
	wsprintf.c

C_SRCS16 = \
	bidi16.c \
	network.c \
	user16.c \
	wnd16.c

RC_SRCS = resources/user32.rc

RC_SRCS16 = \
	resources/display.rc \
	resources/mouse.rc \
	resources/version16.rc

SUBDIRS = tests

EXTRA_OBJS = $(MODULE).glue.o

EXTRASUBDIRS = \
	$(TOPOBJDIR)/controls \
	$(TOPOBJDIR)/windows \
	dde \
	resources

@MAKE_DLL_RULES@

# Special rules for 16-bit resource and spec files

user.exe.spec.c: user.exe.spec resources/version16.res
	$(LDPATH) $(WINEBUILD) $(DEFS) -H 65520 -o $@ -M $(MODULE) -spec $(SRCDIR)/user.exe.spec

resources/display.res: resources/display.rc
	$(LDPATH) $(WRC) $(DIVINCL) -o $@ -w16 -m -r $(SRCDIR)/resources/display.rc

resources/mouse.res: resources/mouse.rc
	$(LDPATH) $(WRC) $(DIVINCL) -o $@ -w16 -m -r $(SRCDIR)/resources/mouse.rc

resources/version16.res: resources/version16.rc
	$(LDPATH) $(WRC) $(DIVINCL) -o $@ -w16 -m -r $(SRCDIR)/resources/version16.rc

display.spec.c: resources/display.res

mouse.spec.c: resources/mouse.res

### Dependencies:
