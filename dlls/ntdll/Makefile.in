TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = ntdll
EXTRALIBS = $(LIBUNICODE)

C_SRCS = \
	critsection.c \
	debugtools.c \
	exception.c \
	error.c \
	file.c \
	large_int.c \
	misc.c \
	nt.c \
	om.c \
	reg.c \
	rtl.c \
	rtlstr.c \
	string.c \
	sec.c \
	signal_i386.c \
	signal_sparc.c \
	sync.c \
	time.c \
	wcstring.c

GEN_ASM_SRCS = \
	relay32.s

EXTRA_OBJS = \
	$(TOPOBJDIR)/files/files.o \
	$(TOPOBJDIR)/if1632/if1632.o \
	$(TOPOBJDIR)/loader/loader.o \
	$(TOPOBJDIR)/loader/ne/ne.o \
	$(TOPOBJDIR)/memory/memory.o \
	$(TOPOBJDIR)/misc/misc.o \
	$(TOPOBJDIR)/msdos/msdos.o \
	$(TOPOBJDIR)/ole/ole.o \
	$(TOPOBJDIR)/relay32/relay32.o \
	$(TOPOBJDIR)/scheduler/scheduler.o \
	$(TOPOBJDIR)/win32/win32.o

SUBDIRS = \
	$(TOPOBJDIR)/files \
	$(TOPOBJDIR)/if1632 \
	$(TOPOBJDIR)/loader \
	$(TOPOBJDIR)/loader/ne \
	$(TOPOBJDIR)/loader/dos \
	$(TOPOBJDIR)/memory \
	$(TOPOBJDIR)/misc \
	$(TOPOBJDIR)/msdos \
	$(TOPOBJDIR)/ole \
	$(TOPOBJDIR)/relay32 \
	$(TOPOBJDIR)/scheduler \
	$(TOPOBJDIR)/win32

@MAKE_DLL_RULES@

$(EXTRA_OBJS): dummy
	@cd `dirname $@` && $(MAKE) `basename $@`

relay32.s: $(WINEBUILD)
	$(LDPATH) $(WINEBUILD) @DLLFLAGS@ -o $@ -relay32

### Dependencies:
