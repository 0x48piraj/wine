EXTRADEFS = -D_GDI32_
TOPSRCDIR = @top_srcdir@
TOPOBJDIR = ../..
SRCDIR    = @srcdir@
VPATH     = @srcdir@
MODULE    = gdi32.dll
IMPORTS   = advapi32 kernel32
ALTNAMES  = gdi.exe dispdib.dll wing.dll
EXTRAINCL = @FREETYPEINCL@
EXTRALIBS = $(LIBUNICODE)

LDDLLFLAGS = @LDDLLFLAGS@
SYMBOLFILE = $(MODULE).tmp.o

C_SRCS = \
	$(TOPOBJDIR)/graphics/bitblt.c \
	$(TOPOBJDIR)/graphics/dispdib.c \
	$(TOPOBJDIR)/graphics/env.c \
	$(TOPOBJDIR)/graphics/escape.c \
	$(TOPOBJDIR)/graphics/fontengine.c \
	$(TOPOBJDIR)/graphics/mapping.c \
	$(TOPOBJDIR)/graphics/painting.c \
	$(TOPOBJDIR)/graphics/path.c \
	$(TOPOBJDIR)/objects/bitmap.c \
	$(TOPOBJDIR)/objects/brush.c \
	$(TOPOBJDIR)/objects/clipping.c \
	$(TOPOBJDIR)/objects/dc.c \
	$(TOPOBJDIR)/objects/dcvalues.c \
	$(TOPOBJDIR)/objects/dib.c \
	$(TOPOBJDIR)/objects/enhmetafile.c \
	$(TOPOBJDIR)/objects/font.c \
	$(TOPOBJDIR)/objects/gdiobj.c \
	$(TOPOBJDIR)/objects/linedda.c \
	$(TOPOBJDIR)/objects/metafile.c \
	$(TOPOBJDIR)/objects/palette.c \
	$(TOPOBJDIR)/objects/pen.c \
	$(TOPOBJDIR)/objects/region.c \
	$(TOPOBJDIR)/objects/text.c \
	driver.c \
	enhmfdrv/bitblt.c \
	enhmfdrv/dc.c \
	enhmfdrv/graphics.c \
	enhmfdrv/init.c \
	enhmfdrv/mapping.c \
	enhmfdrv/objects.c \
	freetype.c \
	gdi16.c \
	gdi_main.c \
	mfdrv/bitblt.c \
	mfdrv/dc.c \
	mfdrv/graphics.c \
	mfdrv/init.c \
	mfdrv/mapping.c \
	mfdrv/objects.c \
	mfdrv/text.c \
	printdrv.c \
	win16drv/font.c \
	win16drv/graphics.c \
	win16drv/init.c \
	win16drv/objects.c \
	win16drv/prtdrv.c \
	win16drv/text.c \
	wing.c

C_SRCS16 = \
	bidi16.c

RC_SRCS = version.rc
RC_SRCS16 = version16.rc

EXTRA_OBJS = $(MODULE).glue.o

SUBDIRS = tests

EXTRASUBDIRS = \
	$(TOPOBJDIR)/graphics \
	$(TOPOBJDIR)/objects \
	enhmfdrv \
	mfdrv \
	win16drv

@MAKE_DLL_RULES@

# Special rules for 16-bit resource and spec files

gdi.exe.spec.c: gdi.exe.spec version16.res
	$(LDPATH) $(WINEBUILD) $(DEFS) -H 65520 -o $@ -M $(MODULE) -spec $(SRCDIR)/gdi.exe.spec

version16.res: version16.rc
	$(LDPATH) $(WRC) $(DIVINCL) -o $@ -w16 -m -r $(SRCDIR)/version16.rc

### Dependencies:
